大理大学本科毕业设计

基于深度学习的农作物叶片病害诊断服务系统

DEEP LEARNING-BASED CROP LEAF DISEASE DIAGNOSIS 

AND SERVICE SYSTEM

学      院：     数学与计算机学院                      

学生  姓名：      马童杰                                     

学      号：      20221108900213                                     

指导  教师：       杨邓奇                                    

专      业：       计算机科学与技术                                    

年级（班级）：   2022级2班                            

起止  日期：    2025年 6 月— 2025年 12 月            

# 摘  要

随着智慧农业和数字乡村建设的推进，传统依赖人工经验和农技人员巡查的植物病害诊断方式在时效性、专业性和覆盖范围等方面逐渐暴露出局限性。为提高病害诊断效率、降低使用门槛、提升服务覆盖，本课题设计并实现了一个基于深度学习的植物病害识别与辅助决策系统。系统采用公开的PlantVillage植物病害图像数据集，结合轻量级卷积神经网络MobileNetV2、FastAPI推理服务以及Spring Boot后端和Vue3 前端技术，实现了“图像识别+知识服务+技术指导+在线交易”的一体化 Web平台。

在模型层面，本文首先对-PlantVillage-数据集进行清洗、划分与增强，过滤异常图像，保证数据质量和评估客观性。针对实际场景中存在大量纯背景和无效图片的问题，本文构建了判别叶片存在性的二分类模型，将无叶片背景与含叶片图像区分开来，并在推理阶段采用两阶段识别框架：先由叶片存在性模型进行背景图像检测与过滤，再由基于-MobileNetV2-的作物识别模型完成作物种类的预测，病害识别模型完成病害类型的预测，最后将两个预测整合形成最终结果。

在系统层面，本文采用前后端分离与模型服务解耦的总体架构。前端基于Vue3+TypeScript+Element Plus构建单页应用，实现了登录注册、病害识别、识别历史、病害知识库、技术指导等功能；后端基于-Spring Boot 3-和-Spring Data JPA，负责用户与权限管理、识别记录管理、知识与技术指导管理、商品与订单管理等业务逻辑；模型推理服务基于FastAPI和PyTorch封装训练好的物种、病害和叶片存在性模型，对外提供统一的/health和/predict接口，并通过配置项与后端松耦合集成。

本系统在功能完整性、识别准确性和系统可用性等方面基本达到了预期设计目标，为面向农户和种植户的植物病害智能诊断与辅助决策提供了一种可行方案。

关键词：植物病害识别；深度学习；MobileNetV2；FastAPI；Spring Boot 

**Abstract**

With the advancement of smart agriculture and digital rural construction, traditional plant disease diagnosis methods that rely on human experience and inspections by agricultural technicians have gradually shown limitations in terms of timeliness, professionalism, and coverage. To improve the efficiency of disease diagnosis, lower the usage threshold, and enhance service coverage, this project designed and implemented a deep learning-based plant disease recognition and decision support system. The system uses the publicly available PlantVillage plant disease image dataset, combined with the lightweight convolutional neural network MobileNetV2, FastAPI inference service, Spring Boot backend, and Vue3 frontend technologies, to create an integrated web platform that offers "image recognition, knowledge services, technical guidance, and online transactions." 

At the model level, this paper first cleans, partitions, and augments the PlantVillage dataset, filtering out abnormal images to ensure data quality and objective evaluation. To address the issue of numerous pure background and invalid images in real scenarios, a binary classification model for leaf presence was constructed to distinguish between background images without leaves and images containing leaves. During inference, a two-stage recognition framework was adopted: first, the leaf presence model detects and filters background images; next, the MobileNetV2-based crop recognition model predicts the crop type, and the disease recognition model predicts the disease type. Finally, the two predictions are integrated to form the final result. 

At the system level, a frontend-backend separation and model service decoupling architecture was adopted. The frontend is a single-page application built with Vue3, TypeScript, and Element Plus, providing functions such as login and registration, disease recognition, recognition history, disease knowledge base, and technical guidance. The backend, based on Spring Boot 3 and Spring Data JPA, handles business logic including user and permission management, recognition record management, knowledge and technical guidance management, and product and order management. The model inference service, built with FastAPI and PyTorch, packages the trained species, disease, and leaf presence models, exposing unified /health and /predict interfaces, and integrates with the backend in a loosely coupled manner through configuration settings. 

This system basically meets the expected design goals in terms of functional completeness, recognition accuracy, and system usability, providing a feasible solution for intelligent plant disease diagnosis and decision support aimed at farmers and cultivators.

**Key Words：**Plant disease recognition; deep learning; MobileNetV2; FastAPI; Spring Boot

# 目  录

[摘  要	I](#_Toc217143432)

[目  录	V](#_Toc217143433)

[第一章 绪论	- 1 -](#_Toc217143434)

[1.1 研究背景与意义	- 1 -](#_Toc217143435)

[1.2 研究目标与内容	- 1 -](#_Toc217143436)

[1.3 研究现状	- 2 -](#_Toc217143437)

[1.4 论文结构	- 3 -](#_Toc217143438)

[第二章 系统需求分析	- 4 -](#_Toc217143439)

[2.1 可行性分析	- 4 -](#_Toc217143440)

[2.2 功能需求	- 4 -](#_Toc217143441)

[2.3非功能性需求	- 10 -](#_Toc217143442)

[第三章 系统总体设计	- 12 -](#_Toc217143443)

[3.1 系统架构设计	- 12 -](#_Toc217143444)

[3.2 数据库设计	- 13 -](#_Toc217143445)

[3.3 模块设计	- 15 -](#_Toc217143446)

[第四章 基于深度学习的叶片病害识别模型	- 17 -](#_Toc217143447)

[4.1 数据集介绍	- 17 -](#_Toc217143448)

[4.2 作物识别模型	- 19 -](#_Toc217143449)

[4.2.1 数据划分	- 19 -](#_Toc217143450)

[4.2.2 模型选择与训练	- 20 -](#_Toc217143451)

[4.2.3 模型评价	- 21 -](#_Toc217143452)

[4.2.4 实验结果	- 22 -](#_Toc217143453)

[4.3 病害识别模型	- 23 -](#_Toc217143454)

[4.3.1 数据划分	- 23 -](#_Toc217143455)

[4.3.2 模型选择与训练	- 24 -](#_Toc217143456)

[4.3.3 模型评价	- 25 -](#_Toc217143457)

[4.3.4 实验结果	- 26 -](#_Toc217143458)

[第五章 系统实现与测试	- 28 -](#_Toc217143459)

[5.1 系统实现	- 28 -](#_Toc217143460)

[5.1.1前端页面的实现	- 28 -](#_Toc217143461)

[5.1.2后端实现	- 33 -](#_Toc217143462)

[5.1.3识别模型的实现	- 33 -](#_Toc217143463)

[5.2 系统测试	- 34 -](#_Toc217143464)

[第六章 总结	- 36 -](#_Toc217143465)

[参考文献	- 38 -](#_Toc217143466)

[致谢	- 39 -](#_Toc217143467)

# 第一章 绪论

## 1.1 研究背景与意义

农业是国民经济的基础，农作物的病害问题直接影响到粮食安全和农产品质量。在传统农业生产中，植物病害诊断主要依赖农民经验或农业技术人员现场查看，但这种方式在诊断时效性、专业性和覆盖范围上存在明显局限。病害会导致叶片出现黄化、斑点、枯萎等症状，进而降低光合作用效率、削弱植株抗逆性，严重时可使作物减产甚至绝收，给农户造成重大经济损失。同时，由于知识水平和专业背景的限制，不少农户对植株病害缺乏科学认识，对于病害的识别和防治缺少合理指导，往往因措施不当而加重损失。

随着智慧农业、数字乡村等理念的发展，大量智能终端设备（如智能手机、无人机等）已经应用于农业生产，为自动化病害诊断提供了技术基础。在此背景下，将计算机视觉与人工智能技术应用于农作物病害识别成为重要研究方向。通过拍摄作物叶片照片并利用深度学习模型自动识别病害类型，可以为缺乏专业知识的农户提供及时、直观的诊断建议。这种基于图像的智能诊断方式有望降低植保门槛、提高诊断效率，具有广阔的应用前景。

从应用意义来看，面向农户的植物病害识别与辅助决策系统可以显著降低病害诊断的专业门槛。农户只需通过手机或电脑上传叶片照片，即可快速获得自动诊断结果和相应的防治建议，而不必完全依赖自身经验判断。系统还可记录历史诊断结果并与知识库联动，帮助农户掌握不同时间和区域的病害发生情况，为制定施肥、防治、轮作等农业生产决策提供数据支撑。此外，通过集成病害知识库和技术指导模块，用户在获得诊断结果的同时可以进一步学习该病害的背景知识和科学防治方法，提升种植管理水平。系统还对接农资商品交易功能，为用户提供从诊断到购买农药肥料的一站式服务，形成业务闭环，提高农业生产效率。

## 1.2 研究目标与内容

本课题致力于构建一个基于深度学习的农作物叶片病害智能诊断服务系统。具体研究目标包括：

1)基于公开的数据集训练较高准确率的病害识别模型，能够识别主要作物种类及其常见病害，并通过叶片存在性检测机制减少纯背景图像导致的误判；

2)开发一个包含前端、后端和模型推理服务的完整Web系统，前端界面友好、操作简便，后端功能完善、安全稳定，模型推理服务高效可靠且与后端松耦合集成；

3)集成病害知识库和专家技术指导模块，用户在得到识别结果的同时可查看相关病害的概述、症状及防治措施，并获取专家撰写的种植管理建议；

4)融合农资商品展示与在线交易功能，将诊断结果与农药、肥料等农资商品推荐相结合，用户可直接下单购买所需物资，完成“诊断-指导-购买”的闭环服务；

5)对系统进行全面的功能测试、模型性能评估与性能测试，验证系统在实际使用场景下的正确性、有效性和稳定性。

围绕上述目标，论文的研究内容涵盖数据处理、模型构建、服务封装和业务系统集成等方面。首先，对公开的PlantVillage植物病害图像数据集进行清洗和增强，并按训练集、验证集和测试集进行划分，为模型训练提供高质量的数据基础。然后，基于轻量级卷积神经网络MobileNetV2分别构建作物物种识别模型和病害识别模型，并训练叶片存在性检测模型，组合形成两阶段的病害识别架构。在此基础上，利用FastAPI将训练好的PyTorch模型封装为独立的推理服务，通过标准HTTP接口提供识别功能；后端采用Spring Boot框架开发业务逻辑，通过配置调用FastAPI模型服务，与前端Vue3单页应用共同构成完整的诊断服务系统。最后，对系统进行了功能测试、模型效果评估和性能测试，根据测试结果发现问题并进行优化改进。

## 1.3 研究现状

植物病害图像识别领域的研究经历了从传统机器学习向深度学习的转变。早期方法多使用人工提取图像特征（如病斑的颜色直方图、纹理和形状特征），再利用支持向量机（SVM）、K近邻（KNN）、决策树等算法对病害进行分类。这类方法在小规模、特定场景下可以取得一定效果，但由于人工特征表达能力有限，对光照、遮挡、拍摄角度等条件变化非常敏感，在复杂多变的田间环境中表现不佳。

近年来，卷积神经网络为代表的深度学习技术在图像识别领域取得突破，大幅提升了植物病害识别的准确率。大量研究将成熟的深度模型（如AlexNet、VGG、ResNet、Inception等）迁移应用到植物病害数据上，通过在公共数据集（如PlantVillage）或自建数据集上进行迁移学习和微调，实现了比传统方法更优的诊断效果。有研究表明，使用深层CNN模型对PlantVillage数据集进行训练可以获得 90%以上的识别准确率[5]；也有工作结合目标检测或图像分割，对病斑区域进行定位分析以提高诊断的精细度。值得一提的是，一些研究开始关注如何进一步提高模型对病害细微差异的辨识能力。例如，有研究将传统图像处理与深度学习相结合，先利用图像分割技术定位叶片病斑区域，再使用卷积神经网络进行分类，从而提升对病斑特征的提取效率；也有研究探索更复杂的模型架构或融合多模型的集成学习，以在复杂背景下获得更鲁棒的识别效果。随着数据集规模和模型复杂度的增长，训练更深层次的神经网络（如DenseNet、EfficientNet等）以及应用预训练模型的迁移学习策略也成为主流趋势，不断刷新植物病害识别的准确率记录。

2010年，Al-Bashish等人首次提出了基于 K 均值聚类算法的植物病害识别方法，对预处理降噪后的农作物病虫害图像进行分类，尝试鉴别五种不同的植物病害（Early scorch、Cottony mold 等）。该方法在实验环境下取得了初步成效，但存在特征提取依赖人工设计、泛化能力弱等问题。

2016年，Mohanty 等人首次将深度学习技术应用于植物病害识别领域，在 PlantVillage 数据集（包含 54,306 张植物叶片图像，涵盖 14 种作物和 26 种病害）上训练深度 CNN 模型，实现了99.35% 的分类准确率。这一突破性成果标志着深度学习在农作物病害识别领域的正式应用，具有里程碑意义。该方法的优点是自动特征提取、泛化能力强，但模型训练需要大量计算资源和时间。

2018年，Ferentinos 评估了多种 CNN 模型（AlexNet、VGG、ResNet 等）在植物病害检测中的性能，提出了优化的 CNN 架构，在 PlantVillage 数据集上达到了99.53% 的准确率，刷新了当时的最高记录。该方法通过模型优化和参数调整提高了识别精度，但模型复杂度较高，难以部署到移动设备上。

2019年，研究重点从单一图像分类转向目标检测，旨在定位病害在叶片上的具体位置。Liu 等人使用 Faster R-CNN进行番茄叶片病害检测，达到了88.6% 的 mAP。该方法能够准确定位病斑位置，但检测速度较慢，难以满足实时性要求。

2022年，王杨等人提出了基于改进Vision Transformer网络的农作物病害识别方法，在自建的田间拍摄数据集上进行农作物病害识别任务，获得了 98.02% 的识别准确率​。该研究通过改进Vision Transformer的架构设计，增强了模型对农作物病害特征的捕获能力。

2025年，李萍团队提出了基于跨深度学习模型的作物病害检测方法，在作物病害相关数据库上进行检测任务，获得了92.35%的识别准确率。该研究通过融合CNN提取的叶片图像特征和BiLSTM提取的环境信息特征，利用注意力机制进行特征融合，实现了对作物病害的综合检测。

总体而言，深度学习已成为当前植物病害图像识别的主流技术手段，在丰富的图像数据支撑下显著改善了病害诊断的准确性和鲁棒性。

## 1.4 论文结构

本文各章节安排如下：

第1章引言，介绍课题背景与意义、相关研究现状，明确研究目的和主要内容，并给出论文的总体结构；

第2章需求分析，包括可行性分析以及对系统功能和非功能需求的详细说明；

第3章系统设计，阐述系统的整体架构设计、数据库模式设计和功能模块划分方案；第4章基于深度学习的叶片病害识别模型，重点介绍数据集处理、作物种类识别模型和病害识别模型的设计原理、训练过程和实验结果分析；

第5章系统实现与测试，描述系统前后端和模型服务的具体实现，并给出系统功能测试、模型评估和性能测试的结果；

第6章总结，对全文进行总结，归纳主要成果并提出后续改进方向。

# 第二章 系统需求分析

## 2.1 可行性分析

本课题具有良好的可行性。从技术可行性看，计算机视觉和深度学习技术日趋成熟[10],大量开源框架（如PyTorch）和工具（如FastAPI、Spring Boot、Vue等）可支撑系统的开发与部署。所采用的MobileNetV2等模型轻量高效，可在普通GPU甚至CPU环境下顺畅运行，模型服务与业务后端通过HTTP松耦合集成也较为简单可行。此外，公开的PlantVillage病害图像数据集为模型训练提供了充足的数据资源，确保模型开发有可靠基础。从经济与资源可行性看，系统开发主要利用开源软件和现有硬件环境，无需高昂成本投入。应用可行性方面，农户对作物病害智能诊断有迫切需求，拍照上传的使用方式简单易行，系统提供的诊断与指导功能具备实际价值。因此，无论在技术实现还是应用推广方面，本系统都有较高的可行性。

## 2.2 功能需求

结合智慧农业的应用场景，系统需要实现以下核心功能模块：

1）植物病害识别：提供作物叶片图像的上传与校验功能，通过深度学习模型识别叶片所属的作物种类及病害类型，返回诊断结果，包括预测类别名称、置信度以及Top-5候选结果列表，并将TOP-5中的第一位作为预测结果展示；保存用户每次识别的记录，以供历史查询和分析，支持生成诊断报告如图2-2- 1。

![placeholder](https://markdowntoword.io/placeholder.png)

图2-2- 1 作物病害识别功能结构图

2）知识库与技术指导：构建植物病害知识库，包含各病害的发生条件、症状特征、防治措施等信息；提供专家撰写的技术指导文章（如防治方案、栽培建议等）。用户可以按作物或病害类别浏览和搜索知识条目及指导内容，识别结果页面与相关知识条目、指导文章实现联动跳转。系统支持对文章的评论、收藏等交互功能，方便用户交流和获取帮助如图2-2- 2。

![placeholder](https://markdowntoword.io/placeholder.png)

图2-2- 2 知识库与技术指导功能结构图

3）用户与权限管理：实现用户账户注册、登录和注销功能，允许用户维护个人信息（昵称、联系方式、收货地址等）。系统采用基于角色的访问控制（RBAC），将用户区分为普通用户、专家用户和管理员三类，不同角色具备不同权限：普通用户可使用诊断和购物等基础功能；专家用户能发布技术指导文章、解答用户咨询；管理员则可以管理系统内容和用户权限等如图2-2- 3。

![placeholder](https://markdowntoword.io/placeholder.png)

图2-2- 3 用户与权限管理功能结构图

4）购物与订单管理：提供农资商品（如农药、肥料等）的展示功能，包括商品名称、类别、价格、库存、适用作物/病害等信息。用户可以将商品加入购物车并提交订单，通过集成的支付宝沙箱环境完成在线支付；系统提供订单列表和订单详情查询功能；管理员能够在后台查看全站订单并处理订单发货、退款等操作如图2-2- 4。

![placeholder](https://markdowntoword.io/placeholder.png)

图2-2- 4 购物与订单管理功能结构图

5）交流与通知：提供用户之间的交流互动渠道和系统信息通知功能。支持用户通过账号或手机号搜索并添加好友，进行即时聊天交流（采用WebSocket 实现消息推送，聊天记录持久化存储以供查看）；同时支持系统公告发布和病害预警通知：管理员可发布公告信息，前端按时间顺序展示公告列表及详情；系统结合病害知识库数据和天气信息向特定区域用户推送病害高发的预警消息，提醒用户及时防范如图2-2- 5

![placeholder](https://markdowntoword.io/placeholder.png)

图2-2- 5 交流与通知功能结构图

综合以上模块功能，系统的典型使用流程包括：

1）普通农户用户上传作物叶片照片后，系统返回诊断的病害名称和相应防治建议，同时提供相关病害知识和技术指导的查看链接；![placeholder](https://markdowntoword.io/placeholder.png)

图2-2- 6 作物病害识别时序图

2）用户可以主动浏览知识库和技术指导模块，学习作物病害的背景知识和科学防治手段；在遇到疑难问题时，用户通过消息聊天向专家咨询并获得实时指导；

![placeholder](https://markdowntoword.io/placeholder.png)

图2-2- 7 种植户咨询专家时序图

3）结果推荐了特定农资产品时，用户可直接进入商城模块选购对应药剂或肥料，将商品加入购物车并提交订单，经在线支付完成购买；

![placeholder](https://markdowntoword.io/placeholder.png)

图2-2- 8 防治物品购买时序图

4）管理员则通过后台管理界面维护知识库内容和技术指导文章，审核专家发布的信息，管理商品和订单以及监控系统运行状态等。

![placeholder](https://markdowntoword.io/placeholder.png)

图2-2- 9 管理员后台管理时序图

通过上述完整的业务闭环，系统为农户提供了从智能诊断到知识获取再到购买防治物资的一站式服务。

## 2.3非功能性需求

1）性能：系统要求响应迅速，并发性能良好。模型推理服务应能在数秒内返回识别结果，一般业务接口应在百毫秒级完成响应。后端需要支持一定数量的并发用户（如同时几十个请求）而保持稳定，确保在农忙时段大量用户同时使用时系统依然流畅可用。

2）可用性：系统界面应简洁友好，适合非专业用户操作，并提供清晰的引导和错误提示；前端应用需兼容主流浏览器，在不同设备和分辨率下均能正常使用。系统须具备较高的可靠性，支持长期不间断运行，关键服务（如模型推理接口）应提供健康检查和故障自动恢复机制，以避免服务中断。

3）安全与可靠性：系统应确保访问控制和数据安全。采用基于角色的权限控制机制，保障普通用户、专家、管理员各司其职，未授权用户无法访问敏感功能；支付流程需确保交易请求和回调通知的签名验证，防范支付欺诈并保证订单数据一致性；后端应对模型服务的可用性进行监控，及时发现异常并告警或切换备用服务；同时定期备份用户、订单、识别记录等重要数据，集中记录日志以支持审计和问题排查，从而提高系统的可靠性。

# 第三章 系统总体设计

## 3.1 系统架构设计

本系统采用分层架构和前后端分离的设计，整体结构清晰、耦合度低。系统划分为前端表示层、后端业务逻辑层、模型推理服务层和数据持久化层：前端为基于 Vue3的单页应用（SPA），负责用户界面的呈现和交互；后端基于Spring Boot构建RESTful服务，处理业务逻辑；深度学习模型作为独立的FastAPI服务部署，通过HTTP接口提供推理功能；数据层使用MySQL数据库存储业务数据。各层之间通过明确定义的接口通信，彼此独立部署，形成松耦合的微服务式架构如。

![placeholder](https://markdowntoword.io/placeholder.png)

图3-1- 1 系统架构图

架构设计强调前后端分离和服务解耦原则。前端与后端仅通过 HTTP(S) 接口进行数据交互，后端与模型推理服务也通过REST API进行松耦合集成。模型推理服务与后端进程独立运行，在系统物理部署方面，各组件按职责分离部署并通过网络通信协同工作：前端SPA在开发阶段使用Vite工具提供本地服务便于调试，正式部署时将构建的静态资源托管于Nginx等Web服务器（或由Spring Boot内置的静态资源服务直接提供）；后端Spring Boot应用打包为独立可执行的 JAR，部署在服务器上监听特定端口（8099）；FastAPI模型推理服务运行在 Python 环境的独立进程中，监听另一个端口（8001），后端通过配置的 URL 与其通信；MySQL数据库作为独立服务运行在标准3306端口，后端通过JDBC连接进行数据存取如图3-1- 1。通过这种部署方式，系统各部分既可以在同一台服务器上协同运行，也可以根据需要分布在不同服务器，通过配置网络地址确保通信畅通。这种灵活的物理架构便于系统根据业务需求进行扩展和迁移，例如在用户量显著增加时将模型服务部署到具有GPU加速能力的云端服务器，或部署多个模型服务实例实现负载均衡。

这样的设计充分利用了Python环境在深度学习部署方面的优势，同时避免了将模型运行对后端造成干扰。由于模型服务独立运行，后续可以在不修改后端代码的前提下，将模型服务迁移至具备更强算力（如GPU）的服务器或云端环境，或部署多个模型服务实例以提升并发处理能力，从而提高系统的可扩展性和维护性。整个系统通过这种层次分离、服务解耦的架构，实现了层次清晰、可独立升级的设计目标。

## 3.2 模块设计

前端模块划分： 前端按照功能划分为多个模块页面，包括首页、病害识别页、历史记录页、病害知识库页、技术指导页、消息聊天页、用户个人中心页、商品购物/订单页和管理员后台管理页等。各页面模块通过Vue Router进行路由配置和导航，并利用导航守卫控制页面访问权限（例如未登录用户被重定向至登录页，非管理员用户无法访问后台管理页），确保不同角色的用户只能使用其权限范围内的功能界面。

后端业务模块划分： 后端按照业务领域逻辑划分为多个高内聚的功能模块，例如：用户与权限管理模块（处理用户注册、登录认证及角色权限校验等）；识别记录管理模块（负责病害识别结果的记录保存和查询）；知识库与指导内容管理模块（维护病害知识条目和专家技术指导文章的增删改查）；商品与订单管理模块（处理商品展示、购物车、订单创建和支付结果更新等逻辑）；消息与通知模块（维护好友关系、聊天记录以及系统公告/预警的发布与推送）；管理员模块（整合上述模块的后台管理功能）。这种模块划分方式使各部分职责单一、层次清晰，便于开发和后续维护扩展。

模型服务模块设计：模型推理服务作为独立模块运行，由FastAPI框架提供Web API接口。主要接口包括：GET/health（健康检查接口，返回模型服务的加载状态、可识别的物种和病害类别数量、当前运行设备等信息）以POST /predict（病害识别接口，接受上传的图像并返回诊断结果）。/predict接口采用两阶段处理流程：先使用叶片存在性模型判断图像中是否含有作物叶片，若判定为纯背景则立即返回“背景”结果并终止后续处理；只有当确认存在叶片时才继续调用物种识别模型和病害识别模型进行分类预测，并综合两者结果输出最终诊断结论（包括物种名称、病害名称、置信度及Top-5选列表）。后端通过配置文件指定FastAPI模型服务的URL地址（http://localhost:8001），在接收到前端的识别请求后，将图片转发给该URL的 /predict 接口获取模型推理结果，然后将结果存入数据库并返回给前端。另外，后端实现了一个GET /detect/health接口代理模型服务的/health接口，使前端可以通过后端查询模型服务状态。通过上述设计，模型推理逻辑与业务逻辑完全解耦，接口清晰规范，保证了系统各模块之间的松耦合和协同工作。

## 3.3 数据库设计

系统数据库采用MySQL关系数据库。根据业务需求设计了用户、识别记录、病害知识条目、技术指导文章、商品、订单等主要数据表，并通过外键建立表与表之间的关联关系，以保持数据的一致性和规范化。通过Spring Data JPA框架将数据库表映射为Java实体类和仓库接口，实现对数据库的ORM操作，极大简化了数据持久层的CRUD编程工作。数据库模式的合理设计保证了各类业务数据的有效存储和快速查询，为系统功能的实现提供了可靠的数据支撑。

表3-2- 1 用户表

字段名

字段类型

字段长度

是否为空

备注说明

id

bigint

NOT NULL

自增用户ID

username

varchar

64

NOT NULL

用户登录名

password_hash

varchar

200

NOT NULL

用户密码哈希值

created_at

datetime

6

NOT NULL

帐号创建时间

**nickname**

varchar

64

NULL

用户昵称

email

varchar

128

NULL

用户邮箱

avatar_url

varchar

255

NULL

头像图片URL

enabled

tinyint

1

NOT NULL

帐号启用标志

role

varchar

32

NOT NULL

用户角色

续表3-2- 1 用户表

字段名

字段类型

字段长度

是否为空

备注说明

user_type

varchar

32

NULL

用户类型

phone

varchar

20

NULL

联系电话

address

varchar

255

NULL

联系地址

表3-2- 2 病害类别表

字段名

字段类型

字段长度

是否为空

备注说明

id

bigint

NOT NULL

自增病害ID

name

varchar

64

NOT NULL

病害名称

description

varchar

2000

NULL

病害描述

advice

varchar

2000

NULL

防治建议

created_at

datetime

6

NOT NULL

创建时间

updated_at

datetime

6

NULL

更新时间

model_label

varchar

128

NOT NULL

模型标签

plant

varchar

64

NOT NULL

植物名称

表3-2- 3 病害信息表

字段名

字段类型

字段长度

是否为空

备注说明

id

bigint

NOT NULL

植物名称

varchar

100

NULL

病害名称

varchar

200

NULL

分布区域

text

NULL

分布时间

varchar

200

NULL

防治方法

text

NULL

续表3-2- 3 病害信息表

字段名

字段类型

字段长度

是否为空

备注说明

创建时间

datetime

6

NULL

更新时间

datetime

6

NULL

表3-2- 4 识别结果记录表

字段名

字段类型

字段长度

是否为空

备注说明

id

bigint

NOT NULL

识别记录ID

predicted_class

varchar

64

NULL

预测类别名称

confidence

double

NOT NULL

结果置信度

advice

varchar

2000

NULL

防治建议

image_url

varchar

255

NULL

图像路径

created_at

datetime

6

NOT NULL

识别时间

model_label

varchar

128

NOT NULL

模型标签

disease_id

bigint

NULL

病害ID

user_id

bigint

NOT NULL

用户ID

username

varchar

64

NULL

用户名

report_url

varchar

255

NULL

pdf报告路径

# 第四章 基于深度学习的叶片病害识别模型

## 4.1 数据集介绍

本系统采用公开的PlantVillage植物病害图像数据集作为模型训练与测试的数据来源。PlantVillage数据集共涵盖约14种作物类别和20种病害类别，包含数万张不同作物叶片及其病害的图像，涵盖苹果、葡萄、番茄、马铃薯等多种常见农作物及其健康叶片和多种病害类型，每张图像按照“作物名称___病害名称”进行分类存储。此外，数据集中单独提供了一个名为“Background_without_leaves”的类别目录，内含纯背景或非叶片图像。使用该数据集有助于模型学习丰富的病害模式，同时提供了背景干扰样本用于过滤。

![placeholder](https://markdowntoword.io/placeholder.png)

### 4.1.1非叶片图像的过滤

在模型结构设计中，额外构建了一个叶片存在性检测模型，用于判断输入图像中是否含有作物叶片。该模型同样基于MobileNetV2骨干，将最后的分类输出层修改为 2 个神经元（分别对应“无叶片背景”和“有叶片”两种判别结果），并采用与物种识别模型类似的迁移学习策略进行训练。叶片存在性模型的训练数据来自PlantVillage数据集：将Background_without_leaves目录下的纯背景图像作为负样本（无叶片类），其余所有含叶片的图像作为正样本（有叶片类）。由于正样本数量远多于负样本，训练时通过下采样和平衡策略控制正负样本数量，确保模型学习过程中各类别损失权重相对均衡。此外，在损失函数中引入类别权重，对少数类（背景类）给予更高权重，以提高模型对背景类的识别敏感度。训练完成后，通过在验证集上统计模型输出的概率分布，设置了普通阈值和严格阈值两级判定标准：当模型判断 “无叶片背景” 的概率高于严格阈值时，认为输入为纯背景图像并可直接拦截；当概率介于普通阈值和严格阈值之间时则标记为 “疑似背景”，提示用户该图像可能无关紧要；而只有当 “无叶片背景” 概率低于普通阈值时，才认为图像中存在叶片，进入后续的物种和病害识别环节。叶片存在性二分类模型作为整个诊断流程的前置环节，大大减少了纯背景或无效图片对后续识别的干扰。需要注意的是，在划分训练数据时，我们将PlantVillage中的“Background_without_leaves”纯背景类从物种和病害识别模型的训练集中剔除，仅将其用于训练叶片存在性二分类模型。这种处理实现了数据层面的任务解耦：物种模型和病害模型只学习实际含叶片图像的分类，而另一个模型专门学习区分无叶片的背景图像，为两阶段识别框架提供可靠的前置过滤手段。

### 4.1.2 数据集的清洗与预处理

在将数据集应用于模型训练前，需要对原始数据进行清洗与预处理。一方面，剔除不合格或异常的图像样本，包括分辨率过低（如边长小于80像素）的图片、长宽比极度异常的图片（疑似错误裁剪的样本）、以及文件名包含“crop”等可疑经过拼接处理的图片。这些清洗步骤有效去除了模糊失真或内容不完整的样本，从源头上提高了训练数据的质量。另一方面，对图像进行统一的缩放和裁剪，将输入尺寸规范化（例如统一调整为224×224像素），为模型提供一致的输入大小。此外，在模型训练阶段引入多种数据增强策略：根据需要选择轻度或中等强度的增强，对训练集样本随机应用诸如随机裁剪缩放、随机水平翻转、随机旋转、颜色抖动等变换操作，以模拟不同拍摄距离、角度和光照条件下的图像变化，从而提高模型对复杂环境的鲁棒性。而验证集和测试集则采用Resize、CenterCrop和Normalize等固定的预处理流程，以确保评估过程的一致性和可比性。

![placeholder](https://markdowntoword.io/placeholder.png)

图4-1- 2 数据集患病玉米叶片示例

![placeholder](https://markdowntoword.io/placeholder.png)

图4-1- 3 数据集患病苹果叶片示例图

完成数据清洗和预处理后，将PlantVillage数据集按约7:2:1的比例划分为训练集、验证集和测试集。划分过程中严格保证同一张图片只出现在一个子集中，防止数据泄漏影响模型泛化性能。系统扫描数据集的目录名称提取出作物物种类别列表和病害类别列表，分别用于构建物种识别和病害识别模型的输出标签。

## 4.2 作物识别模型

### 4.2.1 数据划分

作物种类识别模型的训练数据来自PlantVillage数据集中所有含叶片的图像，但不包括纯背景类别。按照前述策略，训练集、验证集和测试集按7:2:1比例拆分如表4-3- 1，其中训练集中包含各类作物的叶片图像若干，验证集和测试集用于客观评估模型性能。通过解析数据集目录名称获取完整的物种类别列表，并据此确定模型输出层的类别维度。虽然不同作物类别的样本数量可能不均衡，但由于总样本量较大且覆盖环境多样，模型有机会学到区分不同作物叶片的稳健特征。

表4-2- 1 作物识别模型数据集划分

作物种类

训练集

验证集

测试集

苹果

6503

1858

929

番茄

24135

6897

3448

土豆

4200

1200

600

玉米

6095

1743

872

草莓

2961

845

423

蓝莓

2102

601

301

桃子

4620

1319

660

樱桃

2878

821

411

橙子

7714

2203

1102

葡萄

6503

1857

929

甜椒

3468

992

496

覆盆子

1400

400

200

大豆

7126

2036

1018

南瓜

2569

734

367

### 4.2.2 模型选择与训练

物种识别模型采用 MobileNetV2 作为骨干卷积神经网络。MobileNetV2属于轻量级深度CNN，采用深度可分离卷积和倒残差结构，在大幅减少参数量和计算量的同时仍保持较强的特征提取能力，非常适合在Web服务等资源受限的场景中部署。[12]本系统利用ImageNet预训练的MobileNetV2模型进行迁移学习，仅对网络最后的全连接分类层进行修改和训练：保留MobileNetV2主干提取特征的卷积层结构，将原本针对ImageNet1000类的输出层替换为适配本系统物种类别数的新输出层，并在该层之前添加一个Dropout层（如 dropout 概率 0.3）以降低过拟合风险。其余卷积层的预训练权重在初始阶段可以选择冻结或部分冻结，以保留预训练模型学到的通用图像特征；待新加入的全连接层权重收敛稳定后，再逐步解冻并微调整个网络，从而加速训练收敛并避免陷入局部最优。

![placeholder](https://markdowntoword.io/placeholder.png)

图4-2- 1 卷积神经网络基本结构

训练过程中，物种模型和叶片存在性模型均采用交叉熵损失函数，并使用自适应优化算法（如Adam）更新模型参数。训练批次大小、初始学习率、权重衰减等超参数通过在验证集上的表现进行调整确定。训练中还结合了标签平滑技术（如设置平滑因子0.1以避免模型过度自信）来提高模型泛化能力，并在GPU环境下启用了自动混合精度(AMP)以减少显存占用和加速计算。训练过程引入Early Stopping（早停）机制和学习率衰减调度：当验证集精度在若干轮内不再提升时，自动降低学习率或提前终止训练，并保留验证性能最佳的模型权重。训练过程中每轮结束后都会在验证集上计算准确率和损失，实时监控模型性能，最终选取表现最优的一组参数作为物种识别模型（同时保存对应的叶片存在性模型最佳权重）。

![placeholder](https://markdowntoword.io/placeholder.png)

### 4.2.3 模型评价

模型训练完成后，在独立的测试集上对物种识别模型进行性能评估。评价指标包括总体准确率以及各类别的精确率（Precision）、召回率（Recall）和 F1-score 值，以全面衡量模型对不同作物类别的识别效果。测试结果表明，物种识别模型具有很高的准确性：总体分类准确率超过90%，主要作物类别的Precision和Recall亦均在90%以上。通过混淆矩阵如图4-2- 3可以看出，模型几乎未出现将一种作物的叶片误判为另一种作物的情况，即没有发生跨物种的错误识别。这说明模型能够提取出区分不同作物叶片的关键特征，对作物种类的判别非常可靠。

![placeholder](https://markdowntoword.io/placeholder.png)

图4-2- 3 作物识别混淆矩阵

作物种类

Precision (%)

Recall (%)

F1-score (%)

Apple

99.54

99.54

99.54

Blueberry

100.00

100.00

100.00

Cherry

100.00

100.00

100.00

Corn

99.78

100.00

99.89

Grape

99.78

100.00

99.89

Orange

100.00

100.00

100.00

Peach

99.40

100.00

99.70

Pepper, bell

100.00

99.60

99.80

Potato

99.34

100.00

99.67

Raspberry

100.00

100.00

100.00

Soybean

100.00

100.00

100.00

Squash

100.00

99.46

99.73

Strawberry

99.53

100.00

99.76

Tomato

100.00

99.46

99.87

加权平均

99.85

99.83

99.85

### 4.2.4 实验结果 

物种识别模型在PlantVillage测试集上达到了预期的分类准确率，能够准确地区分不同作物的叶片类别。通过迁移学习和数据增强策略，模型在相对较少的训练轮次内即收敛并取得了优良性能。MobileNetV2的引入不仅保证了模型精度，还使模型的参数规模和计算开销大幅降低，推理速度较快，满足了Web实时服务对响应速度和部署成本的要求。综上，物种识别模型为系统提供了一个高效可靠的作物种类识别功能模块。

## 4.3 病害识别模型

### 4.3.1 数据划分

病害识别模型的训练数据包含 PlantVillage 数据集中各类有病害的叶片图像以及健康叶片图像，同样不包括纯背景类。由于原始数据集中每种作物都有一个健康（无病害）类别，为简化模型的输出空间，数据预处理中将所有作物的健康叶片样本合并为统一的 “健康” 类别。因此，病害识别模型需要区分的类别既包括一个健康叶片类别，也包括若干具体病害类别。经过合并和整理，系统生成了病害类别列表并确定模型输出层的维度。训练集、验证集和测试集的划分仍然按照7:2:1的比例进行如续表4-3- 1，确保评估结果的客观性和可靠性。同样地，病害模型训练时也排除了Background_without_leaves背景类样本，以免无效图像干扰病害分类的学习。

表4-3- 1 病害识别模型数据集划分

病害种类

训练集

验证集

测试集

白粉病

4041

1156

577

细菌性斑点病

7590

2171

1086

黄龙病(柑橘绿化病)

7710

2203

1101

尾孢菌叶斑病/灰斑病

1400

400

200

普通锈病

1669

477

238

叶斑病

2480

708

354

叶霉病

1400

400

200

早疫病

1400

400

200

晚疫病

4073

1164

582

番茄花叶病毒

1400

400

200

续表4-3- 1 病害识别模型数据集划分

病害种类

训练集

验证集

测试集

番茄黄化曲叶病毒

7500

2143

1071

红蜘蛛病

2346

670

335

靶斑病

1966

562

281

黑星病

1400

400

200

雪松苹果锈病

1400

400

200

黑腐病

3052

872

436

叶焦病

1553

444

222

埃斯卡病(黑麻疹)

3872

553

277

叶枯病(伊萨里opsis叶斑)

1507

430

215

北方叶枯病

1400

400

200

### 4.3.2 模型选择与训练

病害识别模型的网络结构与物种模型类似，同样选择 MobileNetV2 作为主干 CNN，并将其最终分类层调整为适配病害类别数的输出节点。考虑到部分病害类别的训练样本数量远少于其他类别，模型训练中采取了一些针对性策略：例如，对样本极少的病害类别应用更强的数据增强，或在损失函数中给予稀有类别更大的权重，以提升模型对少数类的关注度。总体的训练流程与物种模型一致，采用相同的优化策略和超参数调优方法如表4-3- 2。在验证集上监控模型性能，当验证损失长时间不再下降或准确率不再提升时采用早停策略，保存性能最佳的病害模型权重用于后续测试和部署。

表4-3- 2 超参数设置表

模型架构

MobileNetV2

批次大小

16

图像尺寸

224

训练轮次

30

续表4-3- 2 超参数设置表

学习率

0.0001

权重衰减

0.00001

设备

NVIDIA GeForce RTX 3050 Laptop GPU

冻结策略

partial

解冻块数

10

分类头Dropout率

0.3

早停耐心值

7

标签平滑

0.1

混合精度训练

True

分类头学习率倍率

3.0

特征层学习率倍率

0.5

类别均衡采样

True

数据增强级别

medium

类别数

动态加载

### 4.3.3 模型评价

在PlantVillage 测试集上对病害识别模型进行评估，计算整体准确率和各病害类别的 Precision、Recall、F1 等指标。结果显示，病害模型的总体分类准确率也在 90% 左右，大部分病害类别能够被模型正确识别。其中常见病害（样本较多的类别）通常 Precision和Recall都较高。然而，由于不同病害之间可能存在相似的症状，混淆矩阵分析发现模型在少数情况下会混淆某些症状相近的病害类别如图4-2- 4。例如，模型偶尔将外观形态类似的两种叶斑病互相混淆。不过这类错误所占比例较小，并未显著影响模型的整体实用性。对于极少数样本稀少的病害类别，模型的 Precision 或 Recall 相对偏低，反映出模型对这些类别的区分能力受限。通过人工检查模型预测错误的案例可以发现，多数错误发生在叶片图像质量较差（例如过于模糊或光照极暗）、病斑症状不典型或者病害处于初期阶段的样本上。这说明模型在极端拍摄条件和少见病害下的鲁棒性仍有提升空间。

![placeholder](https://markdowntoword.io/placeholder.png)

![placeholder](https://markdowntoword.io/placeholder.png)

图4-2- 4 病害识别模型混淆矩阵

### 4.3.4 实验结果

病害识别模型的实验结果表明，其在PlantVillage测试集上达到了预期的性能，与物种模型共同构成了可靠的双模型诊断框架。模型对绝大多数病害类别都能给出准确判断，仅有极个别易混淆类别存在一定误判率，但总体Precision和Recall仍保持在较高水平如表4-3- 3。另外，通过引入叶片存在性二分类模型作为前置筛选，本系统有效降低了背景噪声对病害识别的干扰。测试验证显示，叶片存在性模型几乎将所有不含作物叶片的背景图像成功拦截，避免它们被误分类为某种病害；同时对于正常的叶片图像，该模型不会错误地将其拦截（仅在极少数边界情况下将图片标记为 “疑似背景” 提醒用户重新拍摄）。两阶段识别框架的应用在保证病害识别准确率的前提下，大幅提升了识别结果的可靠性。总体而言，基于MobileNetV2的物种识别和病害识别模型在公开数据集上均取得了理想的效果，验证了所提出模型方案的可行性和有效性，为整个诊断系统提供了精准高效的核心算法支持。

表4-3- 3 病害类别建模测试结果

类别名称

Precision（%）

Recall（%）

F1-score（%）

Apple_scab

97.09

100.00

98.52

Bacterial_spot

99.29

99.47

99.38

Black_rot

100.00

100.00

100.00

Cedar_apple_rust

100.00

100.00

100.00

Cercospora_leaf_spot Gray_leaf_spot

90.57

96.00

93.20

Common_rust

100.00

100.00

100.00

Early_blight

97.98

97.00

97.49

Esca_(Black_Measles)

100.00

100.00

100.00

Haunglongbing_(Citrus_greening)

99.82

100.00

99.91

Late_blight

99.31

97.62

98.46

Leaf_Mold

98.04

100.00

99.01

Leaf_blight_(Isariopsis_Leaf_Spot)

100.00

100.00

100.00

Leaf_scorch

100.00

100.00

100.00

Northern_Leaf_Blight

95.70

89.00

92.23

Powdery_mildew

100.00

99.65

99.82

Septoria_leaf_spot

97.77

98.87

98.31

Spider_mites

98.22

98.81

98.52

加权平均

99.21

99.20

99.20

# 第五章 系统实现与测试

## 5.1 系统实现

按照第 3 章的设计方案，本系统在具体开发中采用了成熟的技术栈实现各功能模块。

### 5.1.1前端页面的实现

前端实现集中在bysj-mtj-web子项目，采用Vue3 + TypeScript + Element Plus构建SPA应用。包括首页、病害识别页、历史记录页、病害知识库页、技术指导页、消息聊天页、用户个人中心页、商品订单页。

1）普通用户登录注册界面如图5-1- 1，普通用户可以在此进行注册与登录

![placeholder](https://markdowntoword.io/placeholder.png)

图5-1- 1 登录界面

2）首页如图5-1- 2，包括农业农村新闻显示、所在位置与当前天气显示、基于位置信息以及天气信息所给出的可能会遭遇的病害预警。

![placeholder](https://markdowntoword.io/placeholder.png)

图5-1- 2 首页

3）病害识别页如图5-1- 3，用户可以选择文件上传本地图片到页面中进行病害识别或者打开本地摄像头进行拍照上传植物病害照片，识别结果也显示在当前页面，识别结果包括作物病害识别相似概率最高的5个可能性和对应病害防治物品推荐，用户可以点击识别结果下的“生成识别报告（pdf）”按钮将识别结果以PDF格式保存到本地。

![placeholder](https://markdowntoword.io/placeholder.png)

图5-1- 3 识别界面

4）识别历史界面如图5-1- 4，用户可以在此页面查看与搜索自己查询过的病害信息，也可进行识别历史的单条删除或批量删除。

![placeholder](https://markdowntoword.io/placeholder.png)

图5-1- 4 识别历史界面

5）技术指导页面如图5-1- 5，在此页面种植户用户可以浏览农林专家用户发表的有关农作物病害防治的相关文章与建议，点击文章可以进入文章详情界面。

![placeholder](https://markdowntoword.io/placeholder.png)

图5-1- 5 技术指导界面

6）消息聊天界面如图5-1- 6，用户可在该页面添加好友进行病害知识交流或者种植户用户向专家用户进行病害问题咨询

![placeholder](https://markdowntoword.io/placeholder.png)

图5-1- 6 聊天咨询界面

7）购物车界面图5-1- 7，用户可以将系统基于识别结果推荐或者专家在防治指导文章中推荐的病害防治物品添加到购物车中进行统一结算。

![placeholder](https://markdowntoword.io/placeholder.png)

图5-1- 7 购物车界面

8）用户个人界面如图5-1- 8，用户可以在此页面修改自己的个人信息，查看自己收藏的防治物品与指导文章，也在此页面进行用户识别记录的可视化显示。

![placeholder](https://markdowntoword.io/placeholder.png)

图5-1- 8 个人中心界面

9）管理员后台界面如图5-1- 9，系统管理员可在此页面进行用户、防治物品、技术指导、识别记录、模型状态以及数据库等内容的管理操作。

![placeholder](https://markdowntoword.io/placeholder.png)

图5-1- 9 系统管理员界面

### 5.1.2后端实现

后端实现集中在springboot子项目，遵循Spring Boot分层架构。通过多个REST控制器分别处理用户认证、图片识别、知识内容、商品订单、消息通知、管理员后台等模块请求，内部调用对应服务类执行业务逻辑，并通过Spring Data JPA与MySQL数据库交互实现数据持久化。主要流程如：识别接口接收前端上传图片后调用FastAPI模型服务获取预测结果并存入识别记录库再返回前端；知识和指导内容接口提供查询浏览功能，专家/管理员通过授权接口对内容增删改；订单接口创建订单记录并调用支付服务更新订单状态，支付结果通过回调或轮询更新数据库并通知前端；消息接口维护好友关系和聊天记录，利用WebSocket实时推送聊天消息给在线用户；管理员接口则封装上述模块的管理操作供后台界面使用。关键参数如数据库连接、模型服务URL、支付密钥等通过配置文件统一管理，方便根据部署环境灵活调整。

### 5.1.3识别模型的实现

FastAPI 模型服务提供两个主要接口：

/health：返回模型服务状态信息（如模型是否加载成功、物种和病害类别数量、当前运行设备等），供后端监控。

/predict：接受上传图像执行推理：先进行叶片存在性判别拦截背景，再对确认含叶片的图像调用物种和病害模型预测，返回物种名称、病害名称、置信度及Top-5候选列表的JSON结果。

FastAPI服务地址和端口通过后端配置ml.fastapi.url 指定，例如 http://127.0.0.1:8001，后端调用/predict获取识别结果，调用/health获取服务状态。通过配置化实现后端与模型服务的松耦合集成，方便部署灵活调整。

## 5.2 系统测试

测试环境与工具：本次测试在Windows 11操作系统的PC上进行，部署了JDK 17、Python3及相关深度学习库（PyTorch、FastAPI）、MySQL 8等软件，前端、后端和模型服务均在该环境中运行。测试过程中使用Postman模拟接口请求以验证功能正确性，借助Edge浏览器开发者工具调试前端页面和监控网络请求。

在测试策略上，针对系统不同部分采用了黑盒测试和白盒测试相结合的方法：对于各业务功能模块，以黑盒测试为主，从用户角度验证输入输出的正确性；对于模型服务集成、支付回调处理、数据库操作等关键环节，则结合白盒测试（代码走查和单元测试）检查内部逻辑和异常处理情况，确保系统在各种极端情况下均按预期运行。此外，从测试层次上划分，分别进行了单元测试、集成测试和系统测试：对部分核心函数或算法（如数据预处理函数）编写单元测试验证其在边界条件下的行为；将前后端、后端与模型服务等组件组合进行集成测试，重点检查模块间接口调用和数据传递的准确性；在系统整体搭建完成后，从用户完整操作流程出发进行了全面的系统测试，验证系统能够满足第 2 章提出的所有功能和非功能需求。

功能测试： 通过设计多种测试用例覆盖系统的主要功能模块，模拟种植户用户、专家用户和管理员等不同角色的使用场景进行验证。测试内容包括：账号注册与登录（正确和错误凭据的处理）、病害识别流程（上传清晰叶片图片应返回正确结果，上传不合规图片应给予错误提示）、历史记录查询（有记录和无记录情况下列表显示是否正常）、知识库和技术指导内容浏览（包括分页、搜索和链接跳转的检查）、商品购物下单与支付流程（各种订单状态和异常情况的处理）、好友添加与消息聊天（即时通讯的可靠性），以及后台管理各项功能（权限控制和数据管理的正确性）等。经过反复测试和调试，结果显示系统各功能模块均能够按照需求正常运行。绝大部分测试用例都通过了验证，仅在早期测试中发现少量问题（例如个别提示信息措辞不够准确、极端情况下聊天消息偶尔有少许延迟），已及时修正并重新测试确认问题解决。

模型测试：对训练得到的物种识别模型和病害识别模型进行了独立的准确率评估。使用前述PlantVillage测试集，计算模型的总体准确率以及各类别Precision、Recall等指标。评估结果验证了模型算法的有效性：物种模型和病害模型在测试集上准确率均在90%以上，其中主要类别的Precision/Recall值也非常高。这表明模型可以较准确地完成作物种类和病害类型的识别任务。结合背景拦截策略的两阶段识别流程也经过了验证：在增加叶片存在性模型作为前置后，测试过程中未出现背景图像被误判为具体病害的情况。模型仅对极个别边界模糊的图片给出了重新拍摄的警告提示，总体上两阶段策略有效减少了误诊，提升了诊断结果的可靠性。

通过以上测试结果可以看出：本系统已经基本达到设计指标要求。功能方面，各模块均经过严格测试验证实现了预期功能，各类用户都能顺利完成相应操作；模型方面，深度学习识别模型具有较高的准确率和良好的鲁棒性，满足实际诊断应用需求尽管测试中也发现模型对极少数边缘情况（如非常模糊的照片或极罕见的病害）的识别还有待加强，但这些问题将在后续工作中逐步改进。总体而言，本章的测试结果充分验证了本系统的实用性和可靠性，为其在实际农业场景中的应用奠定了基础。

# 第六章 总结

本论文围绕农作物叶片病害智能诊断这一目标，完成了从需求分析、系统设计到系统实现与测试的全部工作，成功构建了一个基于深度学习的植物病害识别与辅助决策系统。具体而言：在需求分析阶段，梳理了植物病害对农业生产的危害以及传统诊断方式的局限性，调研了国内外基于图像的病害识别研究现状，明确了构建面向农户的病害智能诊断与辅助决策平台的研究意义和目标；在系统需求分析和总体设计阶段，结合实际应用场景确定了普通用户、专家用户、管理员三类角色的需求，分析了功能和非功能需求，并通过用例模型形式化描述了主要业务流程；然后提出了前后端分离、模型服务解耦的总体架构方案，将Vue3前端、Spring Boot后端、FastAPI模型服务和MySQL数据库有机结合，形成了层次清晰、耦合度低的系统框架。

在系统详细设计与实现阶段，重点围绕识别模型的设计、训练与部署进行了深入阐述和开发。数据层面，基于PlantVillage数据集完成了数据清洗、划分和增强，为模型训练提供了高质量的数据；模型层面，选取MobileNetV2作为轻量化骨干网络，通过迁移学习分别构建了物种识别模型和病害识别模型，并独立训练了叶片存在性二分类模型，形成了两阶段的识别架构；服务层面，使用FastAPI将训练好的模型封装为独立的推理服务，提供统一HTTP接口，后端通过配置项集成调用，实现了业务服务与模型服务的松耦合；同时完成了前端单页应用的各主要模块界面、后端业务逻辑和数据库表结构等开发工作，完整覆盖了系统所需的功能点。系统测试阶段，通过功能性测试、识别模型评估和性能压力测试等，对系统进行了充分的验证，结果表明系统基本达到了预期的设计要求：功能流程正确完整，识别模型精度较高且两阶段策略有效减少了误判，系统在一定并发负载下运行稳定、响应性能良好。

本课题的研究和实现具有一定的创新性和实用价值：引入叶片存在性检测模型作为前置步骤，区别于传统单阶段识别方案，有效减少了背景无关图像造成的误诊，并通过普通/严格双阈值策略实现了对疑似背景的预警提示和对明确背景的拦截，大幅提高了识别结果的可靠性，在包含背景干扰的农业病害识别场景中具有一定创新性和推广价值；采用轻量级 MobileNetV2 分别训练物种和病害两个CNN模型，而非使用一个大型模型同时输出两个结果，大幅降低了每个模型的参数规模和计算开销，使模型推理服务能够在资源有限的环境中快速响应，并支持更高的并发请求量。同时，双模型架构允许对物种识别和病害识别任务分别优化和独立更新，灵活性更高；系统功能上，将AI病害识别诊断与知识科普、技术指导服务以及农资电商交易相结合，提供了从“诊断→学习→指导→购买”的完整业务闭环，为农业领域的信息化服务提供了一种新思路。此外，系统实现了模型服务与业务服务解耦部署，将深度学习模型的推理从后端业务服务器中独立出来。后端仅通过HTTP接口与模型服务交互，不关心模型内部实现细节。这种架构降低了后端系统的复杂性和潜在错误影响范围，使模型的独立部署、扩容或替换更加方便。例如，未来可以在不修改后端代码的前提下，将模型服务迁移至具有GPU加速的云端环境，或部署多个模型服务实例以负载均衡，提高系统整体的可扩展性和鲁棒性。

当然，由于时间、数据和经验等条件所限，系统仍存在一些可以改进的地方。目前模型主要基于公开数据训练，在真实生产场景中（例如光照剧烈变化、叶片部分遮挡重叠等复杂条件）下的识别鲁棒性还有待进一步验证和提升；系统尚未经过超大规模用户长时间使用的考验，在监控告警、日志集中管理、自动化部署与扩容、故障恢复等运维方面也相对基础，缺乏完善的运维体系支撑。这些不足在一定程度上限制了系统在真实大田环境中的直接应用，需要在后续工作中逐步加以改进和优化。例如，可通过采集更多来自实际田间的病害图像数据来扩充训练集，针对样本极少的病害类别改进模型算法或增加数据，以提高模型对罕见病害和极端情况的识别性能；同时完善系统的部署架构和运维监控机制，支持更加自动化的扩展和故障处理能力，以提升系统在真实环境下的稳定性和可维护性。

综上所述，本课题构建的深度学习农作物叶片病害诊断服务系统基本达到了预期的设计目标，为面向农户和农业从业者的植物病害智能诊断与辅助决策提供了一种可行方案。随着系统的进一步完善和优化，相信该系统在功能深度、识别精度和应用广度等方面都有进一步提升的空间，可在智慧农业和数字乡村建设中发挥更大的作用。

# 参考文献

- 潘云峰,郝玉玺,叶林生.基于计算机视觉的人工智能技术在智能监控中的应用探究[J].信息产业报道,2025(11):0077-0079.
- 和文全,薛惠峰,解丹蕊,杜喆.基于K近邻的支持向量机分类方法[J].计算机仿真,2008,25(11):161-163+171.
- 吴泽翔,赵杰,胡晓.基于特征融合和SVM的植物病害检测[J].电脑编程技巧与维护,2022(2):39-41.
- 汪强,李美琳,马新明,乔红波,郭伟,时雷,熊淑萍,樊泽华,郑光.机器学习改进卷积神经网络在作物病害识别中的研究进展[J].河南农业大学学报,2025,59(5):767-775.
- 李淼,王敬贤,李华龙,胡泽林,杨选将,黄小平,曾伟辉,张建,房思思.基于CNN和迁移学习的农作物病害识别方法研究[J].智慧农业,2019,1(3):46-55.
- 张超飞,王逸芳,齐庆磊,刘金江.基于ACE和深度学习的植物病害检测[J].中国科技纵横,2024(4):26-29+116.
- 杨森,冯全,阎文博,周文伟,杨婉霞.多模态引导视觉Transformer的小样本农作物病害识别[J].农业工程学报,2025,41(6):195-203.
- Al-Bashish, S., Bani-Ahmad, S., & Braik, M. (2011). Detection and Classification of Leaf Diseases using K-means-based Segmentation and Neural-networks-based Classification. Information Technology Journal, 10(2), 267-275.
- Mohanty, S. P., Hughes, D. P., & Salathé, M. (2016). Using Deep Learning for Image-Based Plant Disease Detection. Frontiers in Plant Science, 7, 1419. 
- Ferentinos, K. P. (2018). Deep Learning Models for Plant Disease Detection and Diagnosis. Computers and Electronics in Agriculture, 145, 311-318.
- Liu, Q., Wang, Z., & Chi, Y. (2019). Identification of Tomato Disease Types and Detection of Infected Areas Based on Deep Convolutional Neural Networks and Object Detection Techniques. Computational Intelligence and Neuroscience, 2019, 9142753.
- 王杨,李迎春,许佳炜,王傲,马唱,宋世佳,谢帆,赵传信,胡明.基于改进Vision Transformer网络的农作物病害识别方法[J].小型微型计算机系统,2024,45(4):887-893.
- 李萍,邵彧,齐国红,张善文.基于跨深度学习模型的作物病害检测方法[J].江苏农业科学,2022,50(8):193-199.
- 胡雯婧,余俊龙,梁雷,张静,董卫彬,蒋龙泉.基于计算机视觉的农作物病虫害识别研究综述[J].微型电脑应用,2025,41(3):90-93+97.
- 冯晓,李丹丹,王文君,郑国清,刘海礁,孙永胜,梁山,杨莹,臧贺藏,张辉.基于轻量级卷积神经网络和迁移学习的小麦叶部病害图像识别[J].河南农业科学,2021,50(4):174-180.
- 刘沛钦,王远,王玲.基于卷积神经网络的玉米叶片病虫害识别研究[J].智慧农业导刊,2025,5(3):34-37.
- 李梦霞,艾珍珍.基于轻量化CNN和知识蒸馏的农作物病害识别[J].长江大学学报(自然科学版),2025,22(4):102-110.
- Leite F E ,Fontoura B L ,Freitas D A , et al.VitiForge: a new procedural pipeline approach for grapevine disease identification under data scarcity[J].Frontiers in plant science,2025,161706973-1706973.
- Pal C ,Karmakar S ,Mukherjee I , et al.A lightweight and explainable CNN model for empowering plant disease diagnosis[J].Scientific Reports,2025,15(1):30720-30720.
- Dong J ,Zhou H ,Fuentes A , et al.Enhancing anomaly detection in plant disease recognition with knowledge ensemble[J].Frontiers in Plant Science,2025,161623907-1623907.DOI:10.3389/FPLS.2025.1623907.
- Lin J ,Chen X ,Lou L , et al.DIEC-ViT: Discriminative information enhanced contrastive vision transformer for the identification of plant diseases in complex environments[J].Expert Systems With Applications,2025,281127730-127730.
- George R ,Thuseethan S ,Ragel G R , et al.Past, present and future of deep plant leaf disease recognition: A survey[J].Computers and Electronics in Agriculture,2025,234110128-110128.

# 致谢

时光匆匆，四年的大学求学之旅已至终点。回首这段充实的岁月，每一步成长都离不开身边亲友、师长与同窗的支持与陪伴。在此，我谨以最诚挚的心意，向所有给予我帮助与关怀的人们致以最衷心的感谢。

首先，我要衷心感谢我的导师杨邓奇老师。从论文选题到框架搭建，从内容撰写到修改完善，老师始终以严谨的治学态度和深厚的学术素养给予我悉心指导。每当我陷入困惑时，老师总能拨云见日，为我指明方向；在论文审阅过程中，杨老师的细致批注与专业建议，让我不断精进文稿。杨老师严谨求实的科研精神与平易近人的处事风格，将成为我未来前行路上的宝贵财富。

感谢数学与计算机学院的各位老师。四年间，你们凭借渊博的专业知识，为我系统构建了扎实的学科基础，课堂上的悉心讲解与课后的耐心答疑，让我得以深入理解专业知识，拓宽学术视野。正是你们的辛勤付出，为我的学业成长与论文撰写奠定了坚实基础。

感谢我的同窗挚友们。求学路上，我们并肩前行，一同探讨学业难题，分享成长感悟。在我疲惫迷茫时，是你们的陪伴与鼓励给予我温暖与力量；在日常相处中，我们互帮互助，共同进步，这段珍贵的同窗情谊将永远铭记于心。

最要感谢的是我的家人。你们是我最坚实的后盾，始终给予我无条件的支持与包容。无论是熬夜赶稿时的悉心照料，还是情绪低落时的理解安慰，都让我能够心无旁骛地投入到学习与论文撰写中。你们的关爱与期望，是我不断前行的最大动力。

感谢四年大学时光里相遇的每一位师长与友人。未来，我将带着这份感恩继续前行，脚踏实地，不负韶华，努力实现自我价值。